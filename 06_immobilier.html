<!-- Démarrage SQL : repos sur OS (C:) -->

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    
    <title>Cours SQL - EXO : BDD Immobilier </title>

    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <!-- =================================== -->
    <!-- en-tête -->
    <!-- =================================== -->

    <header class="container-fluid p-4 bg-grisclair">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4 text-dark">Cours SQL - BDD Immobilier # 6</h1>
                <p class="lead">Exercice</p>
            </div>
        </div>
        <!-- fin row  -->
    </header>

    <!-- debut div de la row caroussel -->
    <div class="d-flex p-4 justify-content-center">
        <!-- debut row -->
        <div class="row col-6">
            <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" data-interval="2500">
                <div class="carousel-inner">

                    <div class="carousel-item active">
                        <img src="img/langage.png" class="d-block w-100" alt="logo sql">
                    </div>

                    <div class="carousel-item">
                        <img src="img/sql.jpg" class="d-block w-100" alt="logo sql">
                    </div>

                    <div class="carousel-item">
                        <img src="img/php.jpg" class="d-block w-100" alt="logo php">
                    </div>

                    <div class="carousel-item">
                        <img src="img/pma.jpg" class="d-block w-100" alt="logo pma">
                    </div>               
                </div>
              </div>
        </div>
        <!-- fin row -->
    </div>
    <!-- fin div caroussel -->

    <!-- corps central avec contenu principal -->
    <main class="row container-fluid mx-auto bg-light">

        <!-- aside gauche avec nav sommaire -->
        <div class="col-3 p-5 bg-grisclair">

            <!-- nav pour la page index : sommaire -->
            <nav id="navbar-example3" class="navbar navbar-light bg-light flex-column align-items-stretch p-3">
                <a class="navbar-brand" href="#index">Page Index - Sommaire</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#introduction">1. Introduction</a>
                    <a class="nav-link" href="#modelisation">2. Modélisation</a>
                    <a class="nav-link" href="#tables">3. Les tables </a>
                    <a class="nav-link" href="#les_colonnes">4. Les colonnes ou les champs </a>
                    <a class="nav-link" href="#les_types_de_donnees">5. Les types de données</a>
                    <a class="nav-link" href="#pk_ai_id">6. Types de données PK AI pour ID</a>
                    <a class="nav-link" href="#les_cardinalites">7. Les cardinalités</a>
                    <a class="nav-link" href="#table de jointure">8.Table de jointure</a>
                    <a class="nav-link" href="#clefs_etrangères">9. Clefs étrangères ou FK</a>
                    <a class="nav-link" href="#les_enregistrements">10. Les enrégistrements</a>
                    <a class="nav-link" href="#interroger_la_bdd">11. Intérroger la BDD </a>
                </nav>

                 <!-- nav pour la page 01_requêtes -->
                <a class="navbar-brand" href="#">Page 01 - Requêtes</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#introduction">1. Base d'une BDD</a>
                    <a class="nav-link" href="#modelisation">2. Création d'une table</a>
                    <a class="nav-link" href="#tables">3. SELECT et DISTINCT</a>
                    <a class="nav-link" href="#les_colonnes">4. Les conditions</a>
                    <a class="nav-link" href="#les_types_de_donnees">5. Les opérateurs de comparaison</a>
                    <a class="nav-link" href="#pk_ai_id">6. ORDER BY</a>
                    <a class="nav-link" href="#les_cardinalites">7. Limitation avec LIMIT</a>
                    <a class="nav-link" href="#table de jointure">8. Faire des calculs</a>
                    <a class="nav-link" href="#clefs_etrangères">9. Les conditions multiples</a>
                    <a class="nav-link" href="#les_enregistrements"> Les regroupements</a>
                </nav>

                <!-- nav pour la page 02_requêtes -->
                <a class="navbar-brand" href="#">Page 02 - Requêtes</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#INSERT INTO, insertion">1. INSERT INTO, insertion</a>
                    <a class="nav-link" href="#modelisation">2. UPDATE, mise à jour</a>
                    <a class="nav-link" href="#tables">3. DELETE, effacer</a>
                    <a class="nav-link" href="#les_colonnes">4. Exo</a>
                </nav>

                <!-- nav pour la page 03_requêtes imbriquées -->
                <a class="navbar-brand" href="#">Page 03 - Requêtes imbriquées</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. </a>
                    <a class="nav-link" href="#">2. </a>
                    <a class="nav-link" href="#">3. </a>
                    <a class="nav-link" href="#">4. </a>
                </nav>

                <!-- nav pour la page 04_jointures -->
                <a class="navbar-brand" href="#">Page 04 - Jointures</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. </a>
                    <a class="nav-link" href="#">2. </a>
                    <a class="nav-link" href="#">3. </a>
                    <a class="nav-link" href="#">4. </a>
                </nav>

                <!-- nav pour la page 05_fonction -->
                <a class="navbar-brand" href="#">Page 05 -</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. </a>
                    <a class="nav-link" href="#">2. </a>
                    <a class="nav-link" href="#">3. </a>
                    <a class="nav-link" href="#">4. </a>
                </nav>

                <!-- nav pour la page 06_immobilier -->
                <a class="navbar-brand" href="#">Page 06 - BDD immobilier</a>
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#">1. </a>
                    <a class="nav-link" href="#">2. </a>
                    <a class="nav-link" href="#">3. </a>
                    <a class="nav-link" href="#">4. </a>
                </nav>

            </nav>
        </div>

        <!-- ================================================ -->
        <!-- section container : contenu principal -->
        <!-- ================================================ -->
    
        <section class="container col-9 mt-4">
        
            <div class="col-md-4 col-lg-12 m-4 mb-4">
                <h2>Modélisation de la BDD immobilier</h2>
                <div class="col-md-8">
                    <code>CREATE DATABASE bibliotheque CHARACTER SET 'utf8';</code></p>
                    <p class="alert alert-success">Il faut creer des INDEX pour certaines tables avant de faire les relaations</p>
                </div>
                <!-- fin col  -->
            </div>
            <!-- fin row -->

            <div class="row">         
                <h3 class="text-center">Les codes nécessaires pour la création des différentes parties</h3>
                <p>Requête On écrit la requête suivante sur le terminal :
               
                <div class="row m-5">
                    <!-- table agence -->
                    <div class="col-md-4 m-5">
                        <figure>
                            <img src="img/immo_agence.jpg" class="image" alt="table agence">
                            <figcaption class="text-center">Table "agence"</figcaption>
                        </figure>
                    </div>
                    <!-- fin col -->

                    <div class="col-md-5 m-5">
                        <h4>Création de la table AGENCE :</h4><br>
                        <p><code>CREATE TABLE IF NOT EXISTS agence ( <br>
                            idAgence int(6) NOT NULL AUTO_INCREMENT, <br>
                            nom varchar(100) NOT NULL, <br>
                            adresse varchar(100) NOT NULL, <br>
                            PRIMARY KEY (idAgence) <br>
                            ) ENGINE=InnoDB DEFAULT CHARSET=latin1 ;</code></p>
                    </div>
                    <!-- fin col -->       
                </div>
                <!-- fin col -->

                <div class="col-md-4 m-5">
                    <h4>Création de la table AGENCE :</h4>
                    <p><code>CREATE TABLE IF NOT EXISTS agence ( 
                        idAgence int(6) NOT NULL AUTO_INCREMENT, 
                        nom varchar(100) NOT NULL, 
                        adresse varchar(100) NOT NULL, 
                        PRIMARY KEY (idAgence) 
                        ) ENGINE=InnoDB DEFAULT CHARSET=latin1 ;</code></p>
                </div>
                <!-- fin col -->

                <!-- table demande -->
                <div class="col-md-4 m-5">
                    <h4>Création de la table DEMANDE :</h4>
                    <p><code>INSERT INTO demande (idDemande, idPersonne, genre, ville, budget, superficie, categorie) VALUES
                        (1, 1, 'appartement', 'paris', 530000, 120, 'vente'),
                        (2, 3, 'appartement', 'bordeaux', 120000, 18, 'vente'),
                        (3, 4, 'appartement', 'bordeaux', 145000, 21, 'vente'),
                        (4, 5, 'appartement', 'bordeaux', 152000, 26, 'vente'),
                        (5, 6, 'appartement', 'lyon', 200000, 55, 'vente'),
                        (6, 7, 'appartement', 'paris', 400000, 55, 'vente'),
                        (7, 9, 'appartement', 'paris', 171000, 40, 'vente'),
                        (8, 13, 'appartement', 'paris', 163000, 25, 'vente'),
                        (9, 16, 'appartement', 'paris', 132000, 15, 'vente'),
                        (10, 19, 'appartement', 'paris', 350000, 80, 'vente'),
                        (11, 22, 'appartement', 'lyon', 600, 20, 'location'),
                        (12, 25, 'appartement', 'lyon', 188000, 65, 'vente'),
                        (13, 27, 'appartement', 'paris', 400, 15, 'location'),
                        (14, 28, 'appartement', 'paris', 330500, 100, 'vente'),
                        (15, 31, 'appartement', 'paris', 90000, 15, 'vente'),
                        (16, 32, 'appartement', 'lyon', 123800, 21, 'vente'),
                        (17, 35, 'appartement', 'lyon', 1200, 70, 'vente'),
                        (18, 37, 'appartement', 'lyon', 1500, 100, 'vente'),
                        (19, 43, 'appartement', 'paris', 600, 20, 'location'),
                        (20, 44, 'appartement', 'paris', 750, 30, 'location'),
                        (21, 45, 'appartement', 'bordeaux', 680, 30, 'location'),
                        (22, 46, 'appartement', 'bordeaux', 213000, 40, 'vente'),
                        (23, 47, 'appartement', 'bordeaux', 700, 45, 'location'),
                        (24, 48, 'appartement', 'paris', 195000, 40, 'vente'),
                        (25, 49, 'appartement', 'paris', 250000, 60, 'vente'),
                        (26, 50, 'appartement', 'lyon', 110000, 12, 'vente'),
                        (27, 51, 'appartement', 'lyon', 500, 17, 'location'),
                        (28, 52, 'appartement', 'paris', 800, 40, 'location'),
                        (29, 53, 'appartement', 'paris', 850, 50, 'location'),
                        (30, 54, 'appartement', 'paris', 177000, 40, 'vente'),
                        (31, 55, 'appartement', 'paris', 630, 20, 'location')</code></p>
                </div>

                <!-- fin col -->
                <div class="col-md-4">
                    <figure>
                        <img src="img/immo_demande.jpg" class="image" alt="table demande">
                        <figcaption class="text-center">Table Agence</figcaption>
                    </figure>
                </div>
                <!-- fin col -->

                <!-- table logement -->
                <div class="col-md-4 m-5">
                    <figure>
                        <img src="img/immo_logement.jpg" class="image" alt="table logement">
                        <figcaption class="text-center">Table logement</figcaption>
                    </figure>
                </div>
                <!-- fin col -->

                <div class="col-md-4 m-5">
                    <h4>Création de la table logement :</h4>
                    <p><code>INSERT INTO logement (idLogement, genre, ville, prix, superficie, categorie) VALUES
                        (5067, 'appartement', 'paris', 685000, 61, 'vente'),
                        (5089, 'appartement', 'paris', 115000, 15, 'vente'),
                        (5091, 'maison', 'paris', 1510000, 130, 'vente'),
                        (5122, 'appartement', 'bordeaux', 550, 17, 'location'),
                        (5189, 'appartement', 'lyon', 420, 14, 'location'),
                        (5245, 'appartement', 'paris', 360000, 40, 'vente'),
                        (5246, 'appartement', 'paris', 970, 35, 'location'),
                        (5249, 'appartement', 'lyon', 110000, 16, 'vente'),
                        (5269, 'appartement', 'bordeaux', 171500, 33, 'vente'),
                        (5278, 'appartement', 'paris', 802000, 90, 'vente'),
                        (5324, 'appartement', 'lyon', 1090, 31, 'location'),
                        (5336, 'appartement', 'bordeaux', 229600, 27, 'vente'),
                        (5378, 'appartement', 'bordeaux', 121900, 26, 'vente'),
                        (5412, 'appartement', 'paris', 1680, 40, 'location'),
                        (5636, 'appartement', 'paris', 370000, 37, 'vente'),
                        (5661, 'appartement', 'bordeaux', 248600, 36, 'vente'),
                        (5723, 'maison', 'bordeaux', 370600, 45, 'vente'),
                        (5770, 'appartement', 'paris', 339000, 38, 'vente'),
                        (5778, 'appartement', 'bordeaux', 228600, 43, 'vente'),
                        (5779, 'appartement', 'paris', 1310000, 105, 'vente'),
                        (5786, 'appartement', 'paris', 570, 20, 'location'),
                        (5860, 'appartement', 'bordeaux', 98000, 18, 'vente'),
                        (5869, 'appartement', 'lyon', 683600, 60, 'vente'),
                        (5873, 'appartement', 'lyon', 676700, 65, 'vente'),
                        (5898, 'appartement', 'paris', 1890, 40, 'location'),
                        (5961, 'appartement', 'bordeaux', 2650, 45, 'location'),
                        (5963, 'appartement', 'paris', 520000, 60, 'vente'),
                        (5964, 'appartement', 'paris', 280000, 38, 'vente');</code></p>
                </div>
                <!-- fin col -->

                <!-- table logement_agence -->
                <div class="col-md-4 m-5">
                    <h4>Création de la table logement_agence :</h4>
                    <p><code>INSERT INTO logement_agence (idLogementAgence, idAgence, idLogement, frais) VALUES
                        (1, 257400, 5067, 34250),
                        (2, 383505, 5067, 30000),
                        (3, 257400, 5089, 5750),
                        (4, 692702, 5089, 7623),
                        (5, 654178, 5091, 75500),
                        (6, 544688, 5091, 56050),
                        (7, 654893, 5122, 700),
                        (8, 608870, 5189, 350),
                        (9, 257400, 5245, 18856),
                        (10, 544688, 5245, 14230),
                        (11, 608870, 5246, 800),
                        (12, 257400, 5249, 5500),
                        (13, 608870, 5249, 7625),
                        (14, 257400, 5269, 9500),
                        (15, 544688, 5269, 8575),
                        (16, 544688, 5278, 25689),
                        (17, 608870, 5278, 40100),
                        (18, 544688, 5324, 600),
                        (19, 544688, 5336, 9542),
                        (20, 608870, 5336, 11480),
                        (21, 504585, 5378, 8652),
                        (22, 608870, 5378, 6095),
                        (23, 257400, 5412, 680),
                        (24, 544688, 5636, 18500),
                        (25, 608870, 5636, 13654),
                        (26, 654893, 5661, 9462),
                        (27, 654178, 5661, 11656),
                        (28, 608870, 5723, 16233),
                        (29, 504585, 5723, 19654),
                        (30, 692702, 5770, 13655),
                        (31, 654178, 5770, 16950),
                        (32, 383505, 5778, 11430),
                        (33, 654658, 5778, 12655),
                        (34, 654178, 5779, 65500),
                        (35, 654658, 5779, 45032),
                        (36, 654178, 5786, 898),
                        (37, 383505, 5786, 520),
                        (38, 257400, 5860, 4900),
                        (39, 654658, 5860, 8905),
                        (40, 544688, 5869, 23685),
                        (41, 654893, 5869, 34180),
                        (42, 257400, 5873, 33835),
                        (43, 257400, 5898, 900),
                        (44, 383505, 5898, 250),
                        (45, 692702, 5898, 1300),
                        (46, 257400, 5961, 1240),
                        (47, 504585, 5961, 300),
                        (48, 692702, 5961, 890),
                        (49, 257400, 5963, 27542),
                        (50, 692702, 5963, 26000),
                        (51, 383505, 5963, 18455)</code></p>
                </div>
                <!-- fin col -->
                
                <div class="col-md-4 m-5">
                    <figure>
                        <img src="img/immo_logement_agence.jpg" class="image" alt="table logement_agence ">
                        <figcaption class="text-center">Table logement_agence</figcaption>
                    </figure>
                </div>
                <!-- fin col -->


                <!-- MODELE POUR LA CREATION DE LA COL avec 2 DIV code + image -->
                <div class="col-md-4 m-5">
                    <h4></h4>
                </div>
                <!-- fin col -->

                <div class="col-md-4 m-5">
                    <figure>
                        <img src="img/.jpg" class="image" alt="table...">
                        <figcaption class="text-center"></figcaption>
                    </figure>
                </div>
                <!-- fin col -->
            </div>
            <!-- fin row  -->


            <div class="row col-10 m-5">

                <h4>Exos : requêtes SQL</h4>

                <ol>
                    <li>
                        Affichez le nom des agences (par ordre alphabetique ou l'inverse) :
                        <code>SELECT nom FROM agence</code>

                        <code>SELECT nom FROM agence ORDER BY nom DESC</code>
                    </li>

                    <li>
                        Affichez le numéro de l'agence « Orpi » :
                        <code>SELECT idAgence FROM agence WHERE nom = 'Orpi'</code>
                    </li>
                   
                    <li>
                        Affichez le premier enregistrement de la table logement : 
                        <code>SELECT * FROM logement LIMIT 1</code>
                    </li>

                    <li>
                        Affichez le nombre de logements (Alias : Nombre_de_logements) : Patrick dit qu'il vaut mieux préciser avec ORDER BY<br>

                        <code>SELECT COUNT(*) AS 'Nombre_de_logements' FROM logement</code>

                        <code>SELECT COUNT(idLogement) AS 'Nombre_de_logements' FROM logement</code>

                        <code>SELECT * FROM logement WHERE idLogement=(SELECT MIN(idLogement) FROM logement)</code>

                        <code>SELECT * FROM logement ORDER BY idLogement LIMIT 0,1</code>

                        <code>SELECT * FROM logement ORDER BY idLogement LIMIT 0,1</code>

                        <code>SELECT MIN(idLogement), genre, ville, prix, superficie, categorie FROM logement</code>
                    </li>

                    <li>
                        Affichez les logements à vendre à moins de 150 000 € dans l'ordre croissant des prix (toujours mettre ASC même si c'est pas ASC par défaut) : <br>
                        <code>SELECT * FROM `logement` WHERE prix <= 150000 ORDER BY prix ASC;</code>

                        <code>SELECT * FROM `logement` WHERE PRIX <= 150000 AND categorie = 'vente';</code>

                        <code>SELECT * FROM `logement` WHERE PRIX <= 150000 AND categorie = 'vente' ORDER BY prix ASC</code>
                    </li>

                    <li>
                        Afficher le nombre de logements à la location (alias : 'nombre_logement_en_location') : <br>
                        <code>SELECT COUNT(idLogement) AS 'nombre_logement_en_location' FROM logement WHERE categorie = 'location'</code>
                    </li>

                    <li>
                        Afficher les villes différentes recherchées par les personnes demandeuses d'un logement : <br>
                        <code>SELECT DISTINCT ville FROM `demande`;</code>
                    </li> 

                    <li>
                        Affichez le nombre de biens à vendre par ville : (Alias nbr_logement_envente_ville) <br>

                        <code>SELECT ville, COUNT(ville) AS 'nbr_logement_envente_ville' FROM logement WHERE categorie='vente' GROUP BY ville ASC</code>

                        <code>SELECT COUNT(idLogement) AS 'nbr logement', ville<br>
                            FROM logement<br>
                            WHERE ville IN(SELECT DISTINCT(ville) FROM logement)<br>
                            AND categorie='vente'<br>
                            GROUP BY ville</code><br>

                        Autres méthodes moins approfondies :

                        <code>SELECT COUNT(*) AS nbr_logement_envente_ville FROM logement WHERE categorie ='vente'</code>

                        <code>SELECT DISTINCT ville AS nbr_logement_envente_ville FROM logement WHERE categorie ='vente'</code>
                    </li> 

                    <li>Quels sont les id des logements destinés à la location ? :<br>
                        <code>SELECT idLogement<br>
                        FROM logement<br>
                        WHERE categorie='location'<br>
                        ORDER BY idLogement</code>
                    </li>

                    <li>
                        Quels sont les id des logements entre 20 et 30m² ? : <br>

                        <code>SELECT idLogement <br>
                        FROM logement <br>
                        WHERE superficie <br>
                        BETWEEN '20' AND '30'</code>

                        <code>SELECT * FROM logement<br>
                        WHERE superficie<br>
                        BETWEEN '20' AND '30'</code>

                        <code>SELECT *<br>
                        FROM logement<br>
                        WHERE superficie>= 20 AND superficie<=30;</code>
                    </li>

                    <li>
                        Quel est le prix vendeur(hors comission) du logement le moins cher à vendre ? <br>
                        <code>SELECT MIN(prix), idLogement, categorie <br>
                        FROM logement <br>
                        WHERE categorie = 'vente'</code> <br>

                        <code>SELECT * <br>
                        FROM logement <br>
                        WHERE categorie = 'vente' <br>
                        ORDER BY prix <br>
                        ASC LIMIT 0,1;</code> <br>
                        
                        Et les prix vendeur des 3 moins chers ?
                        <code>SELECT *
                        FROM logement <br>
                        WHERE categorie = 'vente' <br>
                        ORDER BY prix <br>
                        ASC LIMIT 1,3</code>
                        <!-- Pour LIMIT 1,3 : 0 serait le premier de la liste, 1 veut dire d'afficher 1 seul element -->
                    </li> 

                    <li>
                        Dans quelles villes se trouvent les maisons à vendre ?

                        <code>SELECT ville <br>
                        FROM logement <br>
                        WHERE categorie = 'vente' <br>
                        AND genre = 'appartement' <br>
                        GROUP By ville</code> <br>

                        <code>SELECT DISTINCT (ville) <br>
                        FROM logement <br>
                        WHERE genre = 'maison' <br>
                        AND categorie = 'vente';</code> <br>

                        <code>SELECT *
                        FROM logement <br>
                        WHERE genre = 'maison'</code>
                    </li> 

                    <li>
                        L'agence Orpi souhaite diminuer les frais qu'elle applique sur le logement ayant l'id « 5246 ». Passer les frais de ce logement de 800 à 730€ : <br>

                        <p>Ici on a une requête impriquée, les 2 faites par Patrick :</p> <br>

                        <code>UPDATE logement_agence <br>
                        SET frais ='1200000' <br>
                        WHERE idLogement = '5246' <br>
                        AND idAgence = <br>
                        (SELECT idAgence <br>
                        FROM agence <br>
                        WHERE nom ='orpi')</code> <br>

                        <code>UPDATE logement_agence <br>
                            SET frais = '12' <br>
                            WHERE idLogement = '5246' <br>
                            AND idAgence = <br>  
                            (SELECT idAgence <br>
                            FROM agence <br>
                            WHERE nom = 'Orpi')</code><br>

                            <hr>

                        <code>UPDATE logement_agence <br>
                        SET frais = 730 <br>
                        WHERE idLogement = 5246;</code>


                        <!-- Ce code de Sleyter n'a pas marché -->
                        <!-- <code>UPDATE logement_agence <br>
                        SET frais = 730 <br>
                        WHERE idLogement = <br>
                        (SELECT idAgence <br>
                        FROM agence <br>
                        WHERE nom = 'Orpi'</code> -->
                    </li> 

                    <li>
                        Quels sont les logements gérés par l'agence « laforet » (id de laforet : 504585) : <br>

                        <code>SELECT * <br>
                        FROM logement_agence <br>
                        WHERE idAgence = <br>
                        (SELECT idAgence <br>
                        FROM agence <br>
                        WHERE nom = 'laforet')</code><br>

                        <code>SELECT idLogement <br>
                        FROM `logement_agence` <br>
                        WHERE idAgence = <br>
                        =(SELECT idAgence FROM agence WHERE nom = 'laforet')</code> <br>
                    </li>

                        
                    <li>
                        Affichez le nombre de propriétaires dans la ville de Paris (Alias : Nombre propriétaire parisien), c'est une enquete de JOINTURE : <br>
                        <code>SELECT COUNT(DISTINCT(logement_personne.idPersonne)) <br>
                            AS 'nombre de proprietaires parisiens' <br>
                            FROM logement_personne , logement <br>
                            WHERE logement_personne.idLogement = logement.idLogement <br>
                            AND logement.ville='paris';</code>
                    </li>

                    <li>
                        Afficher les infos des trois premières personnes souhaitant acheter un logement : <br>
                        <code>SELECT * FROM personne, demande
                        WHERE personne.idPersonne = demande.idPersonne
                        AND demande.categorie = 'vente' ORDER BY demande.idDemande
                        LIMIT 0,3;</code>   
                </ol>  
            </div>

            <div class="row">
                <h3>La suite des questions ( requêtes de jointure)</h3>
                <ol>
                    <li>Afficher le bien de Robin et le/les agences qui gérent ce bien <br>
                        <code>SELECT personne.prenom, logement_personne.idLogement, logement.ville, logement.superficie, logement.genre, agence.nom <br>
                        FROM personne, logement_personne, logement, agence, logement_agence <br>
                        WHERE personne.idPersonne = logement_personne.idPersonne <br>
                        AND logement_personne.idLogement = logement.idLogement <br>
                        AND logement_personne.idLogement = logement_agence.idLogement <br>
                        AND agence.idAgence = logement_agence.idAgence <br>
                        AND logement_personne.idLogement = 5770</code> <br>
                    </li>


                    <li>Affichez le prénom du vendeur pour le logement ayant la référence « 5770 » <br>
                        <code>SELECT personne.prenom, logement_personne.idLogement <br>
                        FROM personne, logement_personne <br>
                        WHERE personne.idPersonne = logement_personne.idPersonne <br>
                        AND logement_personne.idLogement = 5770</code>
                    </li>

                    <li>
                        Affichez les prénoms des personnes souhaitant avoir un logement à Lyon (je rajoute Morgane + budget): <br>
                        <code>SELECT personne.prenom, demande.ville, demande.budget <br>
                        FROM demande, personne <br>
                        WHERE personne.idPersonne = demande.idPersonne <br>
                        AND demande.ville = 'Lyon' <br>
                        AND personne.prenom = 'Morgane'</code> <br>
                    </li>

                    <li>
                        Affichez les prénoms des personnes souhaitant accéder à un logement en location à Paris ( avec ORDER BY en plus pour ASC) : <br>
                        <code>SELECT personne.prenom, demande.ville <br>
                            FROM demande, personne <br>
                            WHERE personne.idPersonne = demande.idPersonne <br>
                            AND demande.ville = 'Paris' <br>
                            ORDER BY personne.prenom ASC</code> <br>
                    </li>

                    <li>
                        Affichez les prénoms des personnes souhaitant acheter un logement de la plus grande à la plus petite superficie (avec le nom de l agence et sans le nom de l agence): <br>
                        
                        <code>SELECT personne.prenom, demande.ville, demande.categorie, demande.superficie <br>
                        FROM demande, personne <br>
                        WHERE personne.idPersonne = demande.idPersonne <br>
                        AND demande.categorie = 'vente' <br>
                        ORDER BY demande.superficie ASC <br>
                    </li>

                    <li>
                        Quel sont les prix finaux proposés par les agences pour la maison à la vente ayant la référence « 5091 » ? (Alias :  frais d'agence inclus) Avec le nom de l agence et sans + autre version d Imram : <br>

                        <code>SELECT agence.nom, (logement_agence.frais+logement.prix) <br>
                        AS 'prix finaux' <br>
                        FROM agence, logement_agence, logement <br>
                        WHERE agence.idAgence = logement_agence.idAgence <br>
                        AND logement_agence.idLogement = logement.idLogement <br>
                        AND logement_agence.idLogement = '5091' <code> <br>

                        <code>SELECT (logement.prix + logement_agence.frais) <br>
                        AS 'prix_final', logement.prix, logement.categorie <br>
                        FROM logement, logement_agence <br>
                        WHERE logement_agence.idLogement = logement.idLogement <br>
                        AND logement_agence.idLogement = '5091'</code> <br>

                        <code>SELECT (logement.prix + logement_agence.frais) AS 'Prix Finaux', logement.categorie, logement.ville, logement.prix, logement_agence.frais <br>
                        FROM logement, logement_agence <br>
                        WHERE logement.idLogement = logement_agence.idLogement <br>
                        AND logement_agence.idLogement = '5091' </code> <br>

                        Avec Nom de l'agence : <br>
                        <code>SELECT logement.categorie, logement.ville, logement.prix, logement_agence.frais, agence.nom, (logement.prix + logement_agence.frais) AS 'Prix Finaux'
                        FROM logement, logement_agence, agence
                        WHERE logement.idLogement = logement_agence.idLogement
                        AND agence.idAgence = logement_agence.idAgence
                        AND logement_agence.idLogement = '5091'
                        </code>

                        Suite exos :

                        Indiquez les frais ajoutés par l'agence pour le logement ID 5873 :
                        <code>SELECT frais, idLogement FROM logement_agence WHERE idLogement = '5873'</code> 

                        Si l’ensemble des logements étaient vendus ou loués demain, quel serait le bénéfice généré grâce aux frais d’agence et pour chaque agence
                        (Alias : benefice, classement : par ordre croissant des gains) // tables agence et logement_agence // SUM() // GROUP BY et ORDER
                        <code>SELECT agence.nom, SUM(logement_agence.frais) AS 'bénéfices' <br>
                        FROM agence, logement_agence <br>
                        WHERE agence.idAgence = logement_agence.idAgence <br>
                        GROUP BY agence.idAgence <br>
                        ORDER BY bénéfices DESC</code> <br>

                        Autre :
                        <code>SELECT agence.nom, SUM(logement_agence.frais) AS 'bénéfices' <br>
                        FROM agence, logement_agence <br>
                        WHERE agence.idAgence = logement_agence.idAgence <br>
                        GROUP BY agence.idAgence <br>
                        ORDER BY agence.nom ASC <br></code> <br>


                        Affichez les id des biens en location, les prix, suivis des frais d’agence (classement : dans l’ordre croissant des prix) : <br>

                        <code>SELECT logement.idLogement, logement.prix, logement.categorie, logement_agence.frais <br>
                        FROM logement, logement_agence <br>
                        WHERE logement.idLogement = logement_agence.idLogement <br>
                        AND logement.categorie = 'location' <br>
                        ORDER BY logement.prix ASC</code> <br>

                        Autre méthode :

                        Quel est le prénom du propriétaire proposant le logement le moins cher à louer ? REQUETES IMRIQUEES // IN : <br>
                        <code> </code>
                   
                        Affichez le prénom et la ville où se trouve le logement de chaque propriétaire // REQUETE DE JOINTURE : <br>

                        Chat de Patrick pour Imram :
                        @Imran HOSSAIN - Suresnes 2021 on n'a pas besoin de la catégorie !

                        on cherche le prénom, la ville dans les tables personne, logement et logement_personne avec 2 id

                        <code>SELECT logement.idLogement, logement.prix, logement.categorie, logement_agence.frais <br>
                        FROM logement, logement_agence <br>
                        WHERE logement.idLogement = logement_agence.idLogement <br>
                        AND logement.categorie = 'location' <br>
                        ORDER BY logement.prix ASC</code> <br>


                        Affichez le nombre de logements à la vente dans la ville de recherche de « hugo » (alias : nombre) // REQUETE DE JOINTURE : <br>
                        <code></code>
                    </li>
                </ol>                                      
            <!-- fin row -->
            </div>
        </section>
        <!-- fin container -->
    </main>
    <!-- fin corps central -->



    <!-- =================================== -->
    <!-- pied de page -->
    <!-- =================================== -->
    
    <!-- Ajouter "container" if you want to extend the Footer to full width/ou container-fluid -->
    <div class="container-fluid p-5 my-5">

        <footer class="text-center text-lg-start bg-jaune">
            <!-- <div class="container d-flex justify-content-center py-5">
                <button genre="button" class="btn-lg btn-floating mx-2" style="background-color: #54456b;">
                <i class="fab fa-facebook-f"></i>
                </button>
    
                <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;">
                <i class="fab fa-youtube"></i>
                </button>
    
                <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;">
                <i class="fab fa-instagram"></i>
                </button>
    
                <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;">
                <i class="fab fa-twitter"></i>
                </button>
            </div> -->

            <!-- Copyright -->
            <div class="text-center text-dark p-5 m-5" style="background-color: rgba(0, 0, 0, 0.2);">
                &copy; Vanusa Santos, Colombbus 2021-2022 :
                <a class="text-dark" href="https://mdbootstrap.com/">Agence Suresnes</a>
            </div>
            <!-- Copyright -->     
        </footer>    
  </div>
  <!-- fin div container/fluid du footer -->

    <!-- Optional JavaScript -->
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
</body>
</html>